## Spring IOC控制反转
核心接口BeanFactory，将对象的创建过程和使用统一交给Spring进行管理。  
底层技术：反射、工厂模式  
作用：降低代码耦合度。
### 创建对象的方式
1) 单独new方式：耦合度很高  
   例如在之前的案例中，创建了数据库访问层dao和业务逻辑层service，在service中创建了dao对象并调用dao对象的方法，如果此时dao对象的名称(类名)发生变化，那么所有的service层就都要发生改变，所以说代码的耦合度很高。
2) 工厂模式：
   再创建一个类，名为Factory。将Factory作为中间层，如果dao对象名(类名)发生变化，只需要更改Factory层中的名字即可，service层不用变化，可以大大减小耦合度。
3) 反射机制：javaSE教程
### 简单手写底层原理
1) dom4j技术解析Spring框架的配置文件spring.xml
2) 得到\<bean id="" class="">类的完整路径地址
3) 在工厂Factory层中通过反射机制动态创建class对象。
#### 小记，类路径根
类路径根指的是运行时的输出目录，而不是源码路径。比如普通java项目的类路径根在out/....下，Maven项目的类路径根在target/classes/下，项目编译后java源码对应的.class文件以及配置文件都会复制到类路径根下。运行时从该类路径根读取。
### Spring实现IOC容器的两种方式
1) BeanFactory：IOC容器最基本的实现，主要用于构建Spring框架而不是用于开发。
2) ApplicationContext：BeanFactory的子接口，在BeanFactory的基础上拓展了很多功能，用于开发。

实际web开发中，主要用的是ApplicationContext而不是BeanFactory，这是因为BeanFactory在读取配置文件的时候不会创建对象，在获取对象的时候才会创建对象，虽然能够使项目启动得较快，但是在使用过程中由于需要创建对象导致运行效率变慢。
而ApplicationContext在获取配置文件的时候就能够创建出对象，虽然启动时间更长，但不会影响到使用过程。同时，Application的功能也比BeanFactory的功能丰富。
### Bean对象管理
1) 通过Spring创建对象
2) 通过Spring注入属性
#### 管理方式
1) 通过xml管理：
如Spring.xml文件中加入了\<bean>标签实现对象管理，id为键，class为值。
2) 通过注解方式管理(SpringBoot)
#### 依赖注入DI
方式：
1) 通过setter注入：在配置文件.xml中给\<bean>标签中加上\<property>标签，该标签会调用实体类中的setter方法完成属性赋值。
2) 通过有参构造方法注入
#### 外部属性注入bean对象
之前的项目中，dao层和service层都是原生new的方式创建出对象。在此，需要注入到spring中，通过spring创建出对象。
#### 内部属性注入bean对象
内部属性注入（nested/inner bean）通常是匿名、只能被包含它的外部 bean 使用，不能复用；外部属性注入（通过 ref 引用）是独立定义的 bean，可在多个地方复用
#### 级联属性注入bean对象
#### 注入集合类型属性
注入集合类型的属性，如数组、列表、HashMap、Set。
#### util标签
若存在多个bean标签，每个bean标签都需要注入相同的属性，就可以使用util标签先进行公共部分提取。以List类型为例，先导入util。
#### 两种类型的bean
在创建对象时(也就是创建bean)，可以使用普通bean(之前的那样)，也可以实现FactoryBean(一种接口)，二者区别如下：
1) 普通bean：普通bean在.xml中配置后，在main函数里返回的类型必须和bean的类型一致。
2) FactoryBean：在.xml中配置后，可以实现返回类型和bean的类型不一致。